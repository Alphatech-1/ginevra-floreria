---
const whatsappLink = "https://wa.me/51934809665"; 
---
<section
  id="contacto"
  class="relative overflow-hidden px-4 sm:px-6 lg:px-8 py-16 md:py-24 lg:py-32 bg-gradient-to-br from-primary/5 via-white to-secondary/5"
>
  <!-- Elementos decorativos de fondo -->
  <div class="absolute inset-0 z-0 overflow-hidden">
    <div class="absolute top-0 left-1/4 w-96 h-96 bg-primary/5 rounded-full blur-3xl animate-pulse-slow"></div>
    <div class="absolute bottom-0 right-1/4 w-96 h-96 bg-secondary/5 rounded-full blur-3xl animate-float-slow"></div>
    
    <!-- Patrones florales sutiles -->
    <div class="absolute top-1/4 right-20 opacity-[0.03] rotate-12">
      <i class="fas fa-spa text-8xl text-primary"></i>
    </div>
    <div class="absolute bottom-1/4 left-20 opacity-[0.03] -rotate-12">
      <i class="fas fa-leaf text-7xl text-primary"></i>
    </div>
  </div>

  <div class="relative z-10 max-w-6xl mx-auto">
    <div class="grid lg:grid-cols-2 gap-12 lg:gap-20 items-center">
      
      <!-- Información de contacto -->
      <div class="animate-fade-in-left">
        <!-- Badge de sección -->
        <div class="inline-flex items-center gap-2 mb-6">
          <span class="w-8 h-0.5 bg-primary"></span>
          <span class="text-primary font-medium tracking-wider text-sm uppercase">Contacto</span>
          <span class="w-8 h-0.5 bg-primary"></span>
        </div>

        <!-- Título principal -->
        <h2 class="font-serif text-4xl sm:text-5xl lg:text-6xl text-primary mb-6 leading-tight">
          Hagamos algo
          <span class="block text-transparent bg-clip-text bg-gradient-to-r from-primary to-secondary">
            especial juntos
          </span>
        </h2>

        <!-- Descripción -->
        <p class="text-secondary/90 text-lg lg:text-xl mb-8 lg:mb-10 leading-relaxed">
          En <span class="font-semibold text-primary">Ginevra</span> nos especializamos en convertir tus ideas en arreglos florales inolvidables. 
          Cuéntanos tu visión y crearemos algo único para ese momento especial.
        </p>

        <!-- Información de contacto destacada -->
        <div class="space-y-6 mb-8 lg:mb-10">
          <div class="flex items-start gap-4 p-4 bg-white/80 backdrop-blur-sm rounded-2xl border border-primary/10 hover:border-primary/30 transition-all duration-300 group">
            <div class="flex-shrink-0 w-12 h-12 rounded-xl bg-primary/10 flex items-center justify-center group-hover:scale-110 transition-transform duration-300">
              <i class="fab fa-whatsapp text-xl text-primary"></i>
            </div>
            <div>
              <h4 class="font-semibold text-primary mb-1">WhatsApp Directo</h4>
              <a 
                href={whatsappLink} 
                target="_blank" 
                class="text-secondary/80 hover:text-primary transition-colors duration-300"
              >
                +51 934 809 665
              </a>
              <p class="text-secondary/60 text-sm mt-1">Respuesta en menos de 15 minutos</p>
            </div>
          </div>

          <div class="flex items-start gap-4 p-4 bg-white/80 backdrop-blur-sm rounded-2xl border border-primary/10 hover:border-primary/30 transition-all duration-300 group">
            <div class="flex-shrink-0 w-12 h-12 rounded-xl bg-primary/10 flex items-center justify-center group-hover:scale-110 transition-transform duration-300">
              <i class="fas fa-envelope text-xl text-primary"></i>
            </div>
            <div>
              <h4 class="font-semibold text-primary mb-1">Correo Electrónico</h4>
              <a 
                href="mailto:ginevrafloreria@gmail.com" 
                class="text-secondary/80 hover:text-primary transition-colors duration-300"
              >
                ginevrafloreria@gmail.com
              </a>
              <p class="text-secondary/60 text-sm mt-1">Respuesta en 24 horas</p>
            </div>
          </div>
        </div>

        <!-- Características -->
        <div class="grid grid-cols-2 gap-4 mb-8">
          <div class="flex items-center gap-3">
            <div class="w-10 h-10 rounded-full bg-green-500/10 flex items-center justify-center">
              <i class="fas fa-check text-green-600"></i>
            </div>
            <div>
              <div class="font-medium text-primary">Envío gratis</div>
              <div class="text-secondary/70 text-sm">Lima Metropolitana</div>
            </div>
          </div>
          <div class="flex items-center gap-3">
            <div class="w-10 h-10 rounded-full bg-green-500/10 flex items-center justify-center">
              <i class="fas fa-check text-green-600"></i>
            </div>
            <div>
              <div class="font-medium text-primary">100% Frescas</div>
              <div class="text-secondary/70 text-sm">Flores premium</div>
            </div>
          </div>
        </div>

        <!-- Horarios -->
        <div class="bg-primary/5 rounded-2xl p-5 border border-primary/10">
          <div class="flex items-center gap-3 mb-3">
            <i class="fas fa-clock text-primary"></i>
            <h4 class="font-semibold text-primary">Horarios de atención</h4>
          </div>
          <div class="grid grid-cols-2 gap-3 text-sm">
            <div>
              <div class="text-primary font-medium">Lunes a Viernes</div>
              <div class="text-secondary/70">9:00 AM - 8:00 PM</div>
            </div>
            <div>
              <div class="text-primary font-medium">Sábados y domingos</div>
              <div class="text-secondary/70">10:00 AM - 6:00 PM</div>
            </div>
          </div>
        </div>
      </div>

      <!-- Formulario -->
      <div class="animate-fade-in-right">
        <div class="bg-white/90 backdrop-blur-sm rounded-3xl p-6 lg:p-8 shadow-2xl border border-primary/10">
          <div class="text-center mb-8">
            <h3 class="font-serif text-2xl lg:text-3xl text-primary mb-3">
              Solicita tu cotización
            </h3>
            <p class="text-secondary/80">
              Completa el formulario y te responderemos en menos de 2 horas
            </p>
          </div>

          <form 
            action="https://formspree.io/f/mojekzjr" 
            method="POST"
            id="contact-form"
            class="space-y-6"
          >
            <!-- Grupo de nombre -->
            <div class="relative">
              <label for="name" class="block text-sm font-medium text-primary mb-2">
                <i class="fas fa-user text-primary/70 mr-2"></i>
                Nombre completo *
              </label>
              <input
                type="text"
                id="name"
                name="name"
                required
                class="w-full px-4 py-3 bg-white border border-primary/20 rounded-xl focus:border-primary focus:ring-2 focus:ring-primary/20 outline-none transition-all duration-300 placeholder:text-secondary/40"
                placeholder="Ej: María Fernández"
              />
              <div class="absolute right-3 top-10 text-primary opacity-0 transition-opacity duration-300">
                <i class="fas fa-check-circle"></i>
              </div>
            </div>

            <!-- Grupo de correo -->
            <div class="relative">
              <label for="email" class="block text-sm font-medium text-primary mb-2">
                <i class="fas fa-envelope text-primary/70 mr-2"></i>
                Correo electrónico *
              </label>
              <input
                type="email"
                id="email"
                name="email"
                required
                class="w-full px-4 py-3 bg-white border border-primary/20 rounded-xl focus:border-primary focus:ring-2 focus:ring-primary/20 outline-none transition-all duration-300 placeholder:text-secondary/40"
                placeholder="tucorreo@email.com"
              />
              <div class="absolute right-3 top-10 text-primary opacity-0 transition-opacity duration-300">
                <i class="fas fa-check-circle"></i>
              </div>
            </div>

            <!-- Grupo de teléfono -->
            <div class="relative">
              <label for="phone" class="block text-sm font-medium text-primary mb-2">
                <i class="fas fa-phone text-primary/70 mr-2"></i>
                Teléfono / WhatsApp *
              </label>
              <input
                type="tel"
                id="phone"
                name="phone"
                required
                class="w-full px-4 py-3 bg-white border border-primary/20 rounded-xl focus:border-primary focus:ring-2 focus:ring-primary/20 outline-none transition-all duration-300 placeholder:text-secondary/40"
                placeholder="Ej: +51 999 888 777"
              />
              <div class="absolute right-3 top-10 text-primary opacity-0 transition-opacity duration-300">
                <i class="fas fa-check-circle"></i>
              </div>
            </div>

            <!-- Grupo de fecha -->
            <div class="relative">
              <label for="date" class="block text-sm font-medium text-primary mb-2">
                <i class="fas fa-calendar-alt text-primary/70 mr-2"></i>
                Fecha del evento (opcional)
              </label>
              <input
                type="date"
                id="date"
                name="date"
                class="w-full px-4 py-3 bg-white border border-primary/20 rounded-xl focus:border-primary focus:ring-2 focus:ring-primary/20 outline-none transition-all duration-300 text-secondary"
              />
            </div>

            <!-- Grupo de mensaje -->
            <div>
              <label for="message" class="block text-sm font-medium text-primary mb-2">
                <i class="fas fa-edit text-primary/70 mr-2"></i>
                Cuéntanos sobre tu proyecto *
              </label>
              <textarea
                id="message"
                name="message"
                rows="4"
                required
                class="w-full px-4 py-3 bg-white border border-primary/20 rounded-xl focus:border-primary focus:ring-2 focus:ring-primary/20 outline-none transition-all duration-300 placeholder:text-secondary/40 resize-none"
                placeholder="Ej: Necesito un arreglo floral para una boda el próximo mes, con colores rosados y blancos..."
              ></textarea>
            </div>

            <!-- Checkbox de términos -->
            <div class="flex items-start gap-3">
              <input
                type="checkbox"
                id="terms"
                name="terms"
                required
                class="mt-1 rounded border-primary/30 text-primary focus:ring-primary/20 focus:ring-2"
              />
              <label for="terms" class="text-sm text-secondary/80">
                Acepto recibir información sobre novedades y promociones de Ginevra Flores.
              </label>
            </div>

            <!-- Botón de envío -->
            <button
              type="submit"
              id="submit-button"
              class="group relative w-full bg-gradient-to-r from-primary to-secondary text-white px-8 py-4 rounded-xl font-semibold text-lg hover:shadow-xl hover:shadow-primary/25 transition-all duration-300 hover:scale-[1.02] overflow-hidden disabled:opacity-50 disabled:cursor-not-allowed"
            >
              <span class="relative z-10 flex items-center justify-center gap-3">
                <i class="fas fa-paper-plane"></i>
                <span id="submit-text">Enviar solicitud</span>
                <i class="fas fa-spinner fa-spin hidden" id="spinner"></i>
              </span>
              <div class="absolute inset-0 bg-gradient-to-r from-secondary to-primary opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
            </button>

            <!-- Mensaje de éxito/error -->
            <div id="form-message" class="hidden p-4 rounded-xl text-center text-sm"></div>

            <!-- Alternativa WhatsApp -->
            <div class="text-center">
              <p class="text-secondary/70 text-sm mb-3">¿Prefieres contacto inmediato?</p>
              <a
                href={whatsappLink}
                target="_blank"
                class="group/wa inline-flex items-center gap-3 bg-green-500 text-white px-6 py-3 rounded-full font-medium hover:shadow-lg hover:shadow-green-500/25 transition-all duration-300"
              >
                <i class="fab fa-whatsapp text-xl"></i>
                <span>Contactar por WhatsApp</span>
                <i class="fas fa-arrow-right group-hover/wa:translate-x-1 transition-transform duration-300"></i>
              </a>
            </div>
          </form>

          <!-- Info adicional formulario -->
          <div class="mt-8 pt-6 border-t border-primary/10">
            <div class="grid grid-cols-2 gap-4 text-center">
              <div>
                <div class="flex items-center justify-center gap-2 text-primary">
                  <i class="fas fa-shield-alt"></i>
                  <span class="font-medium">Seguro</span>
                </div>
                <div class="text-xs text-secondary/60">Datos protegidos</div>
              </div>
              <div>
                <div class="flex items-center justify-center gap-2 text-primary">
                  <i class="fas fa-bolt"></i>
                  <span class="font-medium">Rápido</span>
                </div>
                <div class="text-xs text-secondary/60">Respuesta en 2h</div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<style>
  /* Animaciones personalizadas */
  @keyframes fadeInLeft {
    from {
      opacity: 0;
      transform: translateX(-50px);
    }
    to {
      opacity: 1;
      transform: translateX(0);
    }
  }

  @keyframes fadeInRight {
    from {
      opacity: 0;
      transform: translateX(50px);
    }
    to {
      opacity: 1;
      transform: translateX(0);
    }
  }

  @keyframes fadeInUp {
    from {
      opacity: 0;
      transform: translateY(30px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  /* Clases de animación */
  .animate-fade-in-left {
    animation: fadeInLeft 1s ease-out forwards;
    opacity: 0;
  }

  .animate-fade-in-right {
    animation: fadeInRight 1s ease-out forwards;
    opacity: 0;
  }

  .animate-fade-in-up {
    animation: fadeInUp 0.8s ease-out forwards;
    opacity: 0;
  }

  /* Animaciones de fondo reutilizadas */
  .animate-pulse-slow {
    animation: pulseSlow 4s ease-in-out infinite;
  }

  .animate-float-slow {
    animation: floatSlow 8s ease-in-out infinite;
  }

  @keyframes pulseSlow {
    0%, 100% {
      opacity: 0.05;
    }
    50% {
      opacity: 0.1;
    }
  }

  @keyframes floatSlow {
    0%, 100% {
      transform: translateY(0);
    }
    50% {
      transform: translateY(-10px);
    }
  }

  /* Estilos para inputs */
  input:focus + div i,
  textarea:focus + div i {
    opacity: 1;
  }

  input:valid + div i,
  textarea:valid + div i {
    opacity: 1;
  }

  /* Estilos para el date input */
  input[type="date"] {
    position: relative;
  }

  input[type="date"]::-webkit-calendar-picker-indicator {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    width: auto;
    height: auto;
    color: transparent;
    background: transparent;
    cursor: pointer;
  }

  input[type="date"]:before {
    content: attr(placeholder);
    position: absolute;
    color: #6b7280;
  }

  input[type="date"]:focus:before,
  input[type="date"]:valid:before {
    display: none;
  }

  /* Efectos de sombra */
  .shadow-2xl {
    box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.15);
  }

  /* Transiciones suaves */
  .transition-all {
    transition-property: all;
    transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
  }
</style>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    // Elementos del formulario
    const form = document.getElementById('contact-form');
    if (!form) return;
    
    const submitButton = document.getElementById('submit-button') as HTMLButtonElement;
    const submitText = document.getElementById('submit-text');
    const spinner = document.getElementById('spinner');
    const formMessage = document.getElementById('form-message');
    
    // Validación en tiempo real
    const inputs = form.querySelectorAll('input[required], textarea[required]');
    
    inputs.forEach(input => {
      const checkIcon = input.parentElement?.querySelector('.fa-check-circle') as HTMLElement;
      if (!checkIcon) return;
      
      input.addEventListener('input', function(this: HTMLInputElement) {
        checkIcon.style.opacity = this.checkValidity() ? '1' : '0';
      });
      
      input.addEventListener('blur', function(this: HTMLInputElement) {
        if (!this.value && this.hasAttribute('required')) {
          checkIcon.style.opacity = '0';
        }
      });
    });
    
    // Formatear número de teléfono
    const phoneInput = document.getElementById('phone');
    if (phoneInput) {
      phoneInput.addEventListener('input', function(e) {
        if (!e.target) return;
        let value = (e.target as HTMLInputElement).value.replace(/\D/g, '');
        if (!value) return;
        
        value = '+51 ' + value;
        if (value.length > 7) value = value.substring(0, 7) + ' ' + value.substring(7);
        if (value.length > 11) value = value.substring(0, 11) + ' ' + value.substring(11);
        
        (e.target as HTMLInputElement).value = value.substring(0, 15);
      });
    }
    
    // Efecto focus en inputs
    const formControls = form.querySelectorAll('input, textarea');
    formControls.forEach(control => {
      control.addEventListener('focus', function(this: HTMLElement) {
        this.parentElement?.classList.add('ring-2', 'ring-primary/10');
      });
      
      control.addEventListener('blur', function(this: HTMLElement) {
        this.parentElement?.classList.remove('ring-2', 'ring-primary/10');
      });
    });
    
    // Manejo del envío del formulario
    form.addEventListener('submit', async function(e) {
      e.preventDefault();
      
      // Mostrar estado de carga
      if (submitButton) submitButton.disabled = true;
      if (submitText) submitText.textContent = 'Enviando...';
      if (spinner) spinner.classList.remove('hidden');
      if (formMessage) formMessage.classList.add('hidden');
      
      try {
        const formData = new FormData(form as HTMLFormElement);
        const response = await fetch((form as HTMLFormElement).action, {
          method: 'POST',
          body: formData,
          headers: { 'Accept': 'application/json' }
        });
        
        if (response.ok) {
          showMessage('success', '¡Mensaje enviado con éxito! Te contactaremos en menos de 2 horas.');
          (form as HTMLFormElement).reset();
          document.querySelectorAll('.fa-check-circle').forEach(icon => {
            (icon as HTMLElement).style.opacity = '0';
          });
        } else {
          throw new Error('Error al enviar el formulario');
        }
      } catch (error) {
        showMessage('error', 'Hubo un error al enviar el mensaje. Por favor, intenta nuevamente o contacta por WhatsApp.');
      } finally {
        // Restaurar estado normal
        if (submitButton) submitButton.disabled = false;
        if (submitText) submitText.textContent = 'Enviar solicitud';
        if (spinner) spinner.classList.add('hidden');
      }
    });
    
    // Mostrar mensajes de estado
    function showMessage(type: string, text: string) {
      if (!formMessage) return;
      
      formMessage.textContent = text;
      formMessage.className = 'p-4 rounded-xl text-center text-sm';
      
      if (type === 'success') {
        formMessage.classList.add('bg-green-50', 'text-green-700', 'border', 'border-green-200');
      } else {
        formMessage.classList.add('bg-red-50', 'text-red-700', 'border', 'border-red-200');
      }
      
      formMessage.classList.remove('hidden');
      
      // Auto-ocultar después de 5 segundos
      setTimeout(() => {
        formMessage.classList.add('hidden');
      }, 5000);
    }
  });
</script>