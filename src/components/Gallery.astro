---
const whatsappLink = "https://wa.me/51932021142"; // CAMBIA ESTE LINK
---

<section id="catalogo" class="relative overflow-hidden px-4 sm:px-6 lg:px-8 py-16 md:py-24 lg:py-32 bg-gradient-to-b from-white to-primary/5">
  <!-- Elementos decorativos de fondo -->
  <div class="absolute inset-0 z-0 overflow-hidden">
    <div class="absolute -top-48 -right-48 w-96 h-96 bg-primary/5 rounded-full blur-3xl animate-pulse-slow"></div>
    <div class="absolute -bottom-48 -left-48 w-96 h-96 bg-secondary/5 rounded-full blur-3xl animate-float-slow"></div>
    
    <!-- Patrones florales decorativos -->
    <div class="absolute top-1/4 left-10 opacity-[0.03] rotate-12">
      <svg class="w-32 h-32 text-primary" fill="currentColor" viewBox="0 0 24 24">
        <path d="M12,2L15.09,8.26L22,9.27L17,14.14L18.18,21.02L12,17.77L5.82,21.02L7,14.14L2,9.27L8.91,8.26L12,2Z"/>
      </svg>
    </div>
  </div>

  <div class="relative z-10 max-w-7xl mx-auto">
    <!-- Header con animaci√≥n -->
    <div class="text-center mb-16 lg:mb-20 animate-fade-in-up">
      <div class="inline-flex items-center gap-3 mb-4">
        <span class="w-12 h-0.5 bg-gradient-to-r from-transparent to-primary"></span>
        <span class="text-primary font-medium tracking-wider text-sm uppercase">Colecci√≥n</span>
        <span class="w-12 h-0.5 bg-gradient-to-l from-transparent to-primary"></span>
      </div>
      
      <h2 class="font-serif text-4xl sm:text-5xl lg:text-6xl text-primary mb-6">
        <span class="block mb-2">Nuestro cat√°logo</span>
        <span class="text-transparent bg-clip-text bg-gradient-to-r from-primary to-secondary">
          floral exclusivo
        </span>
      </h2>
      
      <p class="text-secondary/80 text-lg max-w-2xl mx-auto leading-relaxed">
        Descubre nuestras creaciones m√°s destacadas, en esta temporada de San Valent√≠n.
      </p>
    </div>

    <!-- Galer√≠a de productos -->
    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 lg:gap-8">
      {[
        {
          front: "/galeria-2.webp",
          title: "ESPIRAL DE MARGARITAS",
          price: "S/ 189.90",
          description: "La combinaci√≥n perfecta entre la intensidad del amor y la sencillez de la alegr√≠a. Este dise√±o captura la esencia de un jard√≠n, donde las rosas rojas y rosadas comparten protagonismo con la frescura de las margaritas y la intensidad de la hortencia.",
          composition: "8 Rosas Rojas premium, 8 Rosas Rosadas premium, Margaritas, Follaje (lluvia), Base cilindrica, Dedicatoria"
        },
{
          front: "/galeria-6.webp",
          title: "MAR ROJO",
          price: "S/ 114.90",
          description: "Este ramo captura la esencia de la pasi√≥n absoluta a trav√©s de la armon√≠a entre el rojo de sus rosas y la elegancia del borgo√±a que las protege. Es una pieza dise√±ada para quienes buscan un detalle que trascienda lo convencional.",
          composition: "12 Rosas Rojas premium, Envoltura de papel coreano, Dedicatoria, Alimento para Flores, Tarjeta de Cuidados"
        },
        {
          front: "/galeria-12.png",
          title: "CARMESI",
          price: "S/ 79.90",
          description: "Un tributo a la calidez y los lazos eternos. Esta cesta combina la resistencia y belleza de los claveles con la delicadeza de las Mini rosas, creando un jard√≠n port√°til lleno de pasi√≥n.",
          composition: "Mini rosas selectas rojas, Claveles, Follaje, Dedicatoria Texturizada, Alimento para Flores, Canasta de Madera"
        },
        {
          front: "/galeria-8.webp",
          title: "AMOR DE VERANO",
          price: "S/ 109.90",
          description: "Como un atardecer c√°lido que no quieres que termine. 'Amor de Verano' captura la pasi√≥n del rojo y la ternura del rosa en un solo abrazo floral. Es el detalle ideal para expresar sentimientos puros y vibrantes.",
          composition: "7 Rosas Rojas Premium, 4 Rosas Rosadas Premium, Follaje (Lluvia), Dedicatoria Texturizada, Alimento para Flores"
        },
        {
          front: "/galeria-9.webp",
          title: "DELIRIO DE AMOR",
          price: "S/ 99.90",
          description: "Un arreglo estilizado que combina la majestuosidad de los lirios en tonos rosado claro y matices fucsia con la suavidad de los lisianthus blancos y toques de claveles rosados. La presencia de capullos cerrados asegura una belleza duradera.",
          composition: "1 Lirio Fucsia Selecta (3 o 4 Cabezas), 1 Lirio Crema Rosado Claro Selecta (3 o 4 Cabezas), Lisianthus, Claveles selectos, Dedicatoria Texturizada, Alimento para Flores"
        },
        {
          front: "/galeria-11.webp",
          title: "AURORA",
          price: "S/ 74.90",
          description: "Un dise√±o encantador que combina la elegancia de las rosas rosadas con la frescura de las gerberas en tonos pastel. El arreglo se completa con gips√≥fila rosada, creando una textura suave y voluminosa.",
          composition: "4 Rosas Rosadas Premium, 2 Gerberas, Follaje, Dedicatoria Texturizada, Alimento para Flores"
        },
        {
          front: "/galeria-16.png",
          title: "ILYA",
          price: "S/ 79.90",
          description: "Una delicada composici√≥n floral dispuesta en una canasta de mimbre artesanal con asa. El dise√±o combina la elegancia de los lisianthus blancos con la textura r√∫stica del statice en tonos malva.",
          composition: "Lisianthus, Claveles selectos, Follaje, Canasta de madera, Dedicatoria texturizada, Alimento para Flores"
        },
        {
          front: "/galeria-10.webp",
          title: "AMOR MIO",
          price: "S/ 74.90",
          description: "Una declaraci√≥n de amor intensa y directa. Este ramo combina la pasi√≥n de las rosas rojas con la fuerza de los claveles, creando un mensaje floral que habla desde el coraz√≥n sin necesidad de palabras.",
          composition: "5 Rosas Rojas Premium, Claveles Rojos Selectos, Follaje, Dedicatoria Texturizada, Alimento para Flores"
        },
        {
          front: "/galeria-1.png",
          title: "GINEVRA",
          price: "S/ 249.90",
          description: "Un suspiro de ternura en cada p√©talo. La suavidad de las rosas p√°lidas se entrelaza con la pasi√≥n del magenta, creando un contraste visual que cautiva a primera vista. Presentado con distinci√≥n, este arreglo est√° dise√±ado para transformar un momento especial en un recuerdo inolvidable.",
          composition: "15 Rosas Rosadas Premium, 10 Rosas Fucsias Premium, Chocolate La Ib√©rica 110 Gr, Follaje, Box, Dedicatoria Texturizada, Alimento para Flores"
        },
        {
          front: "/galeria-5.webp",
          title: "RUBI",
          price: "S/ 129.90",
          description: "La intensidad del rub√≠ se encuentra con la pureza del blanco. Este ramo es un homenaje a los sentimientos sinceros y duraderos, combinando la pasi√≥n de las rosas rojas con la lealtad y paz que transmiten las blancas.",
          composition: "10 Rosas Rojas Premium, 4 Rosas Blancas Premium, Dedicatoria Texturizada, Alimento para Flores"
        },
        {
          front: "/galeria-14.png",
          title: "ZOE",
          price: "S/ 54.90",
          description: "Un rayo de sol capturado en flores. 'Zoe' es el equilibrio perfecto entre la fuerza del girasol y la dulzura de las rosas rosadas. Este ramo nace para iluminar el d√≠a de alguien especial.",
          composition: "2 Rosas Rosadas Premium, 1 Girasol Selecto, Follaje, Dedicatoria Texturizada, Alimento para Flores"
        },
        {
          front: "/galeria-15.png",
          title: "MARIA",
          price: "S/ 54.90",
          description: "Un contraste que cautiva los sentidos. 'Maria' es la uni√≥n perfecta entre la alegr√≠a radiante del girasol y la pasi√≥n eterna de las rosas rojas. Enmarcado en tonos borgo√±a.",
          composition: "2 Rosas Rojas Premium, 1 Girasol Selecto, Follaje, Dedicatoria Texturizada, Alimento para Flores"
        },
        {
          front: "/galeria-13.webp",
          title: "GIRASOLES DE AMOR",
          price: "S/ 59.90",
          description: "Un abrazo de luz y color. 'Girasoles de Amor' es la combinaci√≥n perfecta entre la vitalidad del amarillo solar y la ternura de los claveles rosados. Este ramo est√° dise√±ado para iluminar cualquier habitaci√≥n.",
          composition: "2 Girasoles Selectos, Claveles de Colores Selectos, Dedicatoria Texturizada, Alimento para Flores"
        },
        {
          front: "/galeria-18.webp",
          title: "MINI RUB√ç",
          price: "S/ 34.90",
          description: "A veces, los gestos m√°s peque√±os son los que hablan m√°s fuerte. Nuestro 'Detalle Rub√≠' captura la esencia de la pasi√≥n en una presentaci√≥n delicada y protegida, dise√±ada para perdurar.",
          composition: "2 Rosas Rojas Premium, Box Peque√±o, Dedicatoria Texturizada, Alimento para Flores"
        },

        {
          front: "/galeria-3.webp",
          title: "ELAIA",
          price: "S/ 179.90",
          description: "Un romance que trasciende el tiempo. 'Eternidad' combina la pureza de las hortensias con la promesa de los tulipanes en un abrazo de p√©talos y fragancia. Dise√±ado para quienes creen en los lazos que nunca se marchitan.",
          composition: "5 Tulipanes Selectos, Mini Rosas Rosadas, 1 Hortensia, Dedicatoria Texturizada, Alimento para Flores"
        },
        {
          front: "/galeria-17.webp",
          title: "TULIP VELVET",
          price: "S/ 39.90",
          description: "La elegancia de lo esencial. 'Velvet' rinde homenaje a la belleza singular de un tulip√°n rojo, capturando la intensidad de un sentimiento en una sola pieza.",
          composition: "1 Tulipan Selecto, Box Peque√±o, Dedicatoria Texturizada, Alimento para Flores"
        },
        {
          front: "/galeria-4.webp",
          title: "AMBAR",
          price: "S/ 159.90",
          description: "Como un dulce momento que se queda grabado en la memoria. 'Ambar' es la mezcla perfecta entre la intensidad del amor y la suavidad de un abrazo. Sus rosas rojas y rosadas bailan junto a la elegancia de los lisianthus blancos.",
          composition: "8 Rosas Rosadas Premium, 7 Rosas Rojas Premium, Follaje, Dedicatoria Texturizada, Alimento para Flores"
        },
        

        {
          front: "/galeria-7.webp",
          title: "ALMA",
          price: "S/ 109.90",
          description: "Porque el amor es el √∫nico lenguaje que el alma entiende. Este dise√±o captura la esencia de la serenidad a trav√©s de sus tonos pastel y su presentaci√≥n et√©rea. Cada rosa ha sido elegida para transmitir un mensaje de paz y afecto profundo.",
          composition: "7 Rosas Rosadas Premium, 4 Rosas Blancas Premium, Follaje, Dedicatoria Texturizada, Alimento para Flores"
        },
        
        
        {
          front: "/LYLI.png",
          title: "Lyli",
          price: "S/ 39.90",
          description: "La sofisticaci√≥n de lo esencial. Este ramo apuesta por una presentaci√≥n impecable y libre de artificios. El papel coreano abraza las flores con una envoltura lisa y suave, creando un marco sutil que realza los colores sin competir con ellos.",
          composition: "Claveles Rosados Selectos, Astromelias Rosadas, Dedicatoria Texturizada, Alimento para Flores"
        },
        
      ].map((item, index) => (
        <div class="group relative animate-fade-in-up" style={{ animationDelay: `${index * 0.1}s` }} data-index={index}>
          <!-- Contenedor de tarjeta flip -->
          <div class="relative h-[400px] lg:h-[450px] rounded-3xl overflow-hidden cursor-pointer perspective-1000 card-container">
            <!-- Cara frontal (imagen) -->
            <div class="absolute inset-0 w-full h-full backface-hidden transition-all duration-700 transform-style-3d card-front">
              <div class="relative w-full h-full">
                <img
                  src={item.front}
                  alt={`${item.title} - Ginevra Flores`}
                  class="w-full h-full object-cover transition-transform duration-700 group-hover:scale-105"
                  loading="lazy"
                />
                <div class="absolute inset-0 bg-gradient-to-t from-black/90 via-transparent to-transparent"></div>
                
                <!-- Info en frontal con precio -->
                <div class="absolute bottom-0 left-0 right-0 p-6">
                  <h3 class="text-sm font-semibold text-white mb-2 truncate">{item.title}</h3>
                  <div class="flex items-center justify-between">
                    <div class="flex flex-col">
                      <span class="text-1xl font-bold text-white">
                        {item.price}
                      </span>
                    </div>
                    <div class="flex items-center gap-1">
                      <span class="text-white/70 text-sm">Click para detalles</span>
                      <i class="fas fa-info-circle text-white/70 ml-1"></i>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Cara trasera (descripci√≥n) -->
            <div class="absolute inset-0 w-full h-full backface-hidden transition-all duration-700 transform-style-3d rotate-y-180 bg-gradient-to-br from-primary/10 to-secondary/10 card-back">
              <div class="relative w-full h-full p-6 flex flex-col justify-between">
                <!-- Bot√≥n para cerrar -->
                <button class="absolute top-4 right-4 w-8 h-8 rounded-full bg-white/90 backdrop-blur-sm flex items-center justify-center text-primary hover:scale-110 transition-transform duration-300 close-btn" aria-label="Cerrar detalles">
                  <i class="fas fa-times"></i>
                </button>
                
                {/* Informaci√≥n del producto */}
                <div class="overflow-y-auto pr-2 scrollable-content" style="max-height: 280px;">
                  <h3 class="font-serif text-xl font-bold text-primary mb-3">{item.title}</h3>
                  <p class="text-secondary/80 text-sm mb-4">
                    {item.description}
                  </p>
                  
                  {/* Composici√≥n */}
                  <div class="mb-4">
                    <h4 class="font-semibold text-primary text-sm mb-2 flex items-center gap-2">
                      <i class="fas fa-leaf text-primary/70"></i>
                      Composici√≥n del ramo:
                    </h4>
                    <p class="text-secondary/70 text-xs leading-relaxed bg-primary/5 p-3 rounded-lg">
                      {item.composition}
                    </p>
                  </div>
                  
                  {/* Precio */}
                  <div class="flex items-center justify-between mb-4">
                    <span class="text-3xl font-bold text-primary">{item.price}</span>
                    <span class="text-sm text-secondary/70 bg-green-500/10 px-3 py-1 rounded-full text-green-600">
                      <i class="fas fa-check-circle mr-1"></i>
                      Disponible
                    </span>
                  </div>
                </div>

                {/* Bot√≥n de WhatsApp siempre visible */}
                <a
                  href={`${whatsappLink}?text=Hola Ginevra, estoy interesado en: ${encodeURIComponent(item.title)} - Precio: ${encodeURIComponent(item.price)}`}
                  target="_blank"
                  rel="noopener noreferrer"
                  class="group/btn relative flex items-center justify-center gap-2 bg-gradient-to-r from-green-500 to-green-600 text-white px-6 py-4 rounded-xl font-semibold hover:shadow-xl hover:shadow-green-500/25 transition-all duration-300 hover:scale-105 overflow-hidden w-full mt-4"
                >
                  <span class="relative z-10 flex items-center gap-2">
                    <i class="fab fa-whatsapp text-xl"></i>
                    Pedir por WhatsApp
                  </span>
                  <div class="absolute inset-0 bg-gradient-to-r from-green-600 to-green-700 opacity-0 group-hover/btn:opacity-100 transition-opacity duration-300"></div>
                  <span class="absolute right-4 group-hover/btn:translate-x-1 transition-transform duration-300">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3"/>
                    </svg>
                  </span>
                </a>
                
                {/* Texto de env√≠o */}
                <p class="text-center text-xs text-secondary/60 mt-3">
                  üìç Env√≠o en Lima y Callao
                </p>
              </div>
            </div>
          </div>

          <!-- Indicador de hover (solo en desktop) -->
          <div class="absolute -top-3 -right-3 bg-primary text-white rounded-full p-2 shadow-lg opacity-0 group-hover:opacity-100 transition-opacity duration-300 hidden lg:block">
            <i class="fas fa-info text-sm"></i>
          </div>
        </div>
      ))}
    </div>

    <!-- CTA final (sin referencia a descuentos) -->
    <div class="text-center mt-16 lg:mt-20 animate-fade-in-up" style="animation-delay: 0.7s">
      <div class="inline-flex flex-col sm:flex-row items-center gap-4 p-6 lg:p-8 bg-white/80 backdrop-blur-sm rounded-3xl border border-primary/10 shadow-lg">
        <div class="text-left">
          <h4 class="font-serif text-xl lg:text-2xl text-primary mb-2">¬øNecesitas un dise√±o especial?</h4>
          <p class="text-secondary/80 mb-4">Creamos arreglos personalizados seg√∫n tus necesidades y ocasi√≥n especial.</p>
        </div>
        <a
          href={whatsappLink}
          target="_blank"
          rel="noopener noreferrer"
          class="group/cta relative bg-gradient-to-r from-green-500 to-green-600 text-white px-8 py-4 rounded-full font-semibold hover:shadow-xl hover:shadow-green-500/25 transition-all duration-300 hover:scale-105 whitespace-nowrap flex items-center gap-3"
        >
          <i class="fab fa-whatsapp text-xl"></i>
          <span class="relative z-10">Consultar por dise√±o personalizado</span>
          <div class="absolute inset-0 bg-gradient-to-r from-green-600 to-green-700 rounded-full opacity-0 group-hover/cta:opacity-100 transition-opacity duration-300"></div>
        </a>
      </div>
    </div>
  </div>
</section>

<style>
  /* Animaciones para la galer√≠a */
  @keyframes fadeInUp {
    from {
      opacity: 0;
      transform: translateY(30px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  /* Efecto 3D para flip cards */
  .perspective-1000 {
    perspective: 1000px;
  }

  .transform-style-3d {
    transform-style: preserve-3d;
  }

  .backface-hidden {
    backface-visibility: hidden;
  }

  .rotate-y-180 {
    transform: rotateY(180deg);
  }

  .rotate-y-0 {
    transform: rotateY(0);
  }

  /* Animaciones personalizadas */
  .animate-fade-in-up {
    animation: fadeInUp 0.8s ease-out forwards;
    opacity: 0;
  }

  .animate-pulse-slow {
    animation: pulseSlow 4s ease-in-out infinite;
  }

  .animate-float-slow {
    animation: floatSlow 8s ease-in-out infinite;
  }

  /* Clases para el estado activo */
  .card-active .card-front {
    transform: rotateY(180deg);
  }

  .card-active .card-back {
    transform: rotateY(0);
  }

  /* Clases reutilizadas */
  @keyframes pulseSlow {
    0%, 100% {
      opacity: 0.05;
    }
    50% {
      opacity: 0.1;
    }
  }

  @keyframes floatSlow {
    0%, 100% {
      transform: translateY(0) translateX(0);
    }
    33% {
      transform: translateY(-10px) translateX(10px);
    }
    66% {
      transform: translateY(5px) translateX(-5px);
    }
  }

  /* Mejoras de line clamp */
  .line-clamp-4 {
    overflow: hidden;
    display: -webkit-box;
    -webkit-box-orient: vertical;
    -webkit-line-clamp: 4;
  }

  .truncate {
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
  }

  /* Responsive adjustments */
  @media (max-width: 640px) {
    .perspective-1000 {
      perspective: 800px;
    }
  }

  /* Mejoras de scroll */
  @media (max-height: 700px) {
    .line-clamp-4 {
      -webkit-line-clamp: 3;
    }
  }

  /* Estilo para scrollbar personalizado */
  .scrollable-content::-webkit-scrollbar {
    width: 4px;
  }

  .scrollable-content::-webkit-scrollbar-track {
    background: rgba(59, 130, 246, 0.1);
    border-radius: 2px;
  }

  .scrollable-content::-webkit-scrollbar-thumb {
    background: rgba(59, 130, 246, 0.3);
    border-radius: 2px;
  }

  .scrollable-content::-webkit-scrollbar-thumb:hover {
    background: rgba(59, 130, 246, 0.5);
  }

  /* ===== FIX FLIP 3D PARA IPHONE / SAFARI ===== */
  .card-container {
    perspective: 1000px;
    -webkit-perspective: 1000px;
    transform-style: preserve-3d;
    -webkit-transform-style: preserve-3d;
  }

  .card-front,
  .card-back {
    backface-visibility: hidden;
    -webkit-backface-visibility: hidden;
    transform-style: preserve-3d;
    -webkit-transform-style: preserve-3d;
    will-change: transform;
  }

  /* Estado inicial correcto */
  .card-front { 
    transform: rotateY(0deg);
    z-index: 2;
  }

  .card-back  { 
    transform: rotateY(180deg);
    z-index: 1;
  }

  /* Estado cuando la tarjeta est√° activa */
  .card-active .card-front { transform: rotateY(180deg); }
  .card-active .card-back  { transform: rotateY(0deg); }

  /* üî• HACK ESPECIAL SOLO PARA iPHONE */
  @supports (-webkit-touch-callout: none) {
    .card-back {
      transform: rotateY(180deg) translateZ(1px);
    }
    .card-active .card-back {
      transform: rotateY(0deg) translateZ(1px);
    }
  }

  /* Clase para contenido con scroll */
  .scrollable-content {
    overflow-y: auto;
    overscroll-behavior: contain;
    -webkit-overflow-scrolling: touch;
  }
</style>

<script is:inline>
document.addEventListener('DOMContentLoaded', () => {
  const cards = document.querySelectorAll('.card-container');

  const toggleCard = (card) => {
    card.classList.toggle('card-active');
  };

  const closeOtherCards = (currentCard) => {
    cards.forEach(card => {
      if (card !== currentCard) {
        card.classList.remove('card-active');
      }
    });
  };

  cards.forEach(card => {
    card.addEventListener('click', (e) => {
      const target = e.target;
      
      // IMPORTANTE: Prevenir el flip cuando se hace scroll dentro del contenido
      if (
        target.closest('.close-btn') ||
        target.closest('a[href*="wa.me"]') ||
        target.closest('a[href*="whatsapp"]') ||
        target.closest('.scrollable-content')
      ) {
        // Permitir scroll dentro del contenido
        if (target.closest('.scrollable-content')) {
          const scrollableContent = target.closest('.scrollable-content');
          
          // Si el contenido tiene scroll y el usuario est√° scrolleando, no hacer flip
          const isScrollable = scrollableContent.scrollHeight > scrollableContent.clientHeight;
          const isAtTop = scrollableContent.scrollTop === 0;
          const isAtBottom = scrollableContent.scrollHeight - scrollableContent.scrollTop === scrollableContent.clientHeight;
          
          // Solo permitir el flip si se hace click en los bordes superior/inferior del scrollable area
          // y el contenido tiene scroll
          if (isScrollable && !isAtTop && !isAtBottom) {
            return;
          }
        }
        return;
      }

      const isActive = card.classList.contains('card-active');

      if (isActive) {
        // Si ya est√° abierta y tocan fuera del contenido trasero ‚Üí cerrar
        if (!target.closest('.card-back')) {
          toggleCard(card);
        }
      } else {
        // En m√≥vil solo una abierta
        if (window.innerWidth < 1024) {
          closeOtherCards(card);
        }
        toggleCard(card);
      }
    });

    // Bot√≥n cerrar
    const closeBtn = card.querySelector('.close-btn');
    if (closeBtn) {
      closeBtn.addEventListener('click', (e) => {
        e.stopPropagation();
        card.classList.remove('card-active');
      });
    }

    // Prevenir que el scroll en el contenido haga flip
    const scrollableContent = card.querySelector('.scrollable-content');
    if (scrollableContent) {
      scrollableContent.addEventListener('wheel', (e) => {
        e.stopPropagation();
      });
      
      scrollableContent.addEventListener('touchmove', (e) => {
        e.stopPropagation();
      });
    }
  });

  // Click fuera ‚Üí cerrar todo
  document.addEventListener('click', (e) => {
    if (!e.target.closest('.card-container')) {
      cards.forEach(card => card.classList.remove('card-active'));
    }
  });

  // ESC ‚Üí cerrar todo
  document.addEventListener('keydown', (e) => {
    if (e.key === 'Escape') {
      cards.forEach(card => card.classList.remove('card-active'));
    }
  });
});
</script>