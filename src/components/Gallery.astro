---
const whatsappLink = "https://wa.me/51934809665"; // CAMBIA ESTE LINK
---


<section id="catalogo" class="relative overflow-hidden px-4 sm:px-6 lg:px-8 py-16 md:py-24 lg:py-32 bg-gradient-to-b from-white to-primary/5">
  <!-- Elementos decorativos de fondo -->
  <div class="absolute inset-0 z-0 overflow-hidden">
    <div class="absolute -top-48 -right-48 w-96 h-96 bg-primary/5 rounded-full blur-3xl animate-pulse-slow"></div>
    <div class="absolute -bottom-48 -left-48 w-96 h-96 bg-secondary/5 rounded-full blur-3xl animate-float-slow"></div>
    
    <!-- Patrones florales decorativos -->
    <div class="absolute top-1/4 left-10 opacity-[0.03] rotate-12">
      <svg class="w-32 h-32 text-primary" fill="currentColor" viewBox="0 0 24 24">
        <path d="M12,2L15.09,8.26L22,9.27L17,14.14L18.18,21.02L12,17.77L5.82,21.02L7,14.14L2,9.27L8.91,8.26L12,2Z"/>
      </svg>
    </div>
  </div>

  <div class="relative z-10 max-w-7xl mx-auto">
    <!-- Header con animaci√≥n -->
    <div class="text-center mb-16 lg:mb-20 animate-fade-in-up">
      <div class="inline-flex items-center gap-3 mb-4">
        <span class="w-12 h-0.5 bg-gradient-to-r from-transparent to-primary"></span>
        <span class="text-primary font-medium tracking-wider text-sm uppercase">Colecci√≥n</span>
        <span class="w-12 h-0.5 bg-gradient-to-l from-transparent to-primary"></span>
      </div>
      
      <h2 class="font-serif text-4xl sm:text-5xl lg:text-6xl text-primary mb-6">
        <span class="block mb-2">Nuestro cat√°logo</span>
        <span class="text-transparent bg-clip-text bg-gradient-to-r from-primary to-secondary">
          floral exclusivo
        </span>
      </h2>
      
      <p class="text-secondary/80 text-lg max-w-2xl mx-auto leading-relaxed">
        Descubre nuestras creaciones m√°s destacadas, en esta temporada de San Valent√≠n.
      </p>
    </div>

    <!-- Galer√≠a de productos -->
    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 lg:gap-8">
      {[
        {
          front: "/galeria-1.webp",
          title: "GINEVRA + CHOCOLATE LA IB√âRICA 110 GR",
          price: "S/ 249.90",
          description: "Exquisito arreglo floral premium acompa√±ado del famoso chocolate La Ib√©rica. Perfecto para ocasiones especiales y regalos empresariales."
        },
        {
          front: "/galeria-2.webp",
          title: "ESPIRAL DE MARGARITAS",
          price: "S/ 199.90",
          description: "Dise√±o en espiral con margaritas frescas que simbolizan pureza e inocencia. Perfecto para cumplea√±os y celebraciones alegres."
        },
        {
          front: "/galeria-3.webp",
          title: "ELAIA",
          price: "S/ 189.90",
          description: "Composici√≥n elegante con tonos tierra y texturas naturales. Nombre griego que significa 'olivo', s√≠mbolo de paz y prosperidad."
        },
        {
          front: "/galeria-4.webp",
          title: "AMBAR",
          price: "S/ 159.90",
          description: "Tonos √°mbar y dorados que capturan la calidez del atardecer. Ideal para decorar interiores y crear ambientes acogedores."
        },
        {
          front: "/galeria-5.webp",
          title: "RUBI",
          price: "S/ 139.90",
          description: "Intenso rojo rub√≠ que representa pasi√≥n y amor profundo. Perfecto para aniversarios y declaraciones de amor."
        },
        {
          front: "/galeria-6.webp",
          title: "MAR ROJO",
          price: "S/ 124.90",
          description: "Composici√≥n en tonos rojos vibrantes que evocan la intensidad del mar al atardecer. Para momentos apasionados."
        },
        {
          front: "/galeria-7.webp",
          title: "ALMA",
          price: "S/ 119.90",
          description: "Arreglo que conecta con lo m√°s profundo del ser. Dise√±o minimalista con significado espiritual y emocional."
        },
        {
          front: "/galeria-8.webp",
          title: "AMOR DE VERANO",
          price: "S/ 114.90",
          description: "Colores vibrantes y frescos que capturan la esencia del verano y el amor juvenil. Alegre y energ√©tico."
        },
        {
          front: "/galeria-9.webp",
          title: "DELIRIO DE AMOR",
          price: "S/ 99.90",
          description: "Composici√≥n apasionada y exuberante que representa el amor en su m√°xima expresi√≥n. Para enamorados."
        },
        {
          front: "/galeria-10.webp",
          title: "AMOR MIO",
          price: "S/ 89.90",
          description: "Dulce y rom√°ntico, perfecto para expresar cari√±o sincero. Ideal para peque√±os detalles que dicen mucho."
        },
        {
          front: "/galeria-11.webp",
          title: "AURORA",
          price: "S/ 79.90",
          description: "Tonos suaves que evocan los primeros rayos del amanecer. Simboliza nuevos comienzos y esperanza."
        },
        {
          front: "/galeria-12.webp",
          title: "CARMESI",
          price: "S/ 74.90",
          description: "Rojo carmes√≠ intenso, elegante y sofisticado. Para ocasiones formales y demostraciones de respeto."
        },
        {
          front: "/galeria-13.webp",
          title: "GIRASOLES DE AMOR",
          price: "S/ 59.90",
          description: "Alegres girasoles que siguen la luz del sol. Simbolizan admiraci√≥n, lealtad y energ√≠a positiva."
        },
        {
          front: "/galeria-14.webp",
          title: "ZOE",
          price: "S/ 54.90",
          description: "Nombre griego que significa 'vida'. Arreglo fresco y vital que celebra la existencia y alegr√≠a de vivir."
        },
        {
          front: "/galeria-15.webp",
          title: "MARIA",
          price: "S/ 54.90",
          description: "Cl√°sico y eterno, como el nombre que lleva. Dise√±o atemporal perfecto para cualquier ocasi√≥n."
        },
        {
          front: "/galeria-16.webp",
          title: "ILYA",
          price: "S/ 49.90",
          description: "Moderno y contempor√°neo con l√≠neas limpias. Ideal para regalos a personas con estilo vanguardista."
        },
        {
          front: "/galeria-17.webp",
          title: "TULIP VELVET",
          price: "S/ 39.90",
          description: "Tulipanes aterciopelados en tonos elegantes. Perfectos para detalles peque√±os pero significativos."
        },
        {
          front: "/galeria-18.webp",
          title: "MINI RUB√ç",
          price: "S/ 34.90",
          description: "Peque√±o pero intenso, mantiene la esencia del Rub√≠ en un formato compacto y accesible."
        }
      ].map((item, index) => (
        <div class="group relative animate-fade-in-up" style={{ animationDelay: `${index * 0.1}s` }} data-index={index}>
          <!-- Contenedor de tarjeta flip -->
          <div class="relative h-[400px] lg:h-[450px] rounded-3xl overflow-hidden cursor-pointer perspective-1000 card-container">
            <!-- Cara frontal (imagen) -->
            <div class="absolute inset-0 w-full h-full backface-hidden transition-all duration-700 transform-style-3d card-front">
              <div class="relative w-full h-full">
                <img
                  src={item.front}
                  alt={`${item.title} - Ginevra Flores`}
                  class="w-full h-full object-cover transition-transform duration-700 group-hover:scale-105"
                  loading="lazy"
                />
                <div class="absolute inset-0 bg-gradient-to-t from-black/90 via-transparent to-transparent"></div>
                
                <!-- Badge de nuevo o destacado -->
                {index < 4 && (
                  <div class="absolute top-4 left-4 bg-white/95 backdrop-blur-sm rounded-full px-3 py-1 shadow-lg">
                    <span class="text-xs font-semibold text-primary">‚ú® Destacado</span>
                  </div>
                )}
                
                <!-- Info en frontal -->
                <div class="absolute bottom-0 left-0 right-0 p-6">
                  <h3 class="text-xl font-semibold text-white mb-1 truncate">{item.title}</h3>
                  <div class="flex items-center justify-between">
                    <span class="text-lg font-bold text-white">{item.price}</span>
                    <div class="flex items-center gap-1">
                      <span class="text-white/70 text-sm">Click para detalles</span>
                      <i class="fas fa-info-circle text-white/70 ml-1"></i>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Cara trasera (descripci√≥n) -->
            <div class="absolute inset-0 w-full h-full backface-hidden transition-all duration-700 transform-style-3d rotate-y-180 bg-gradient-to-br from-primary/10 to-secondary/10 card-back">
              <div class="relative w-full h-full p-6 flex flex-col justify-between">
                <!-- Bot√≥n para cerrar -->
                <button class="absolute top-4 right-4 w-8 h-8 rounded-full bg-white/90 backdrop-blur-sm flex items-center justify-center text-primary hover:scale-110 transition-transform duration-300 close-btn" aria-label="Cerrar detalles">
                  <i class="fas fa-times"></i>
                </button>
                
                {/* Informaci√≥n del producto */}
                <div>
                  <h3 class="font-serif text-xl font-bold text-primary mb-3">{item.title}</h3>
                  <p class="text-secondary/80 text-sm mb-4 line-clamp-4">
                    {item.description}
                  </p>
                  <div class="flex items-center justify-between mb-4">
                    <span class="text-2xl font-bold text-primary">{item.price}</span>
                    <span class="text-sm text-secondary/70 bg-primary/10 px-3 py-1 rounded-full">Disponible</span>
                  </div>
                </div>

                {/* Bot√≥n de WhatsApp siempre visible */}
                <a
                  href={`${whatsappLink}?text=Hola Ginevra, estoy interesado en: ${encodeURIComponent(item.title)} - ${encodeURIComponent(item.price)}`}
                  target="_blank"
                  rel="noopener noreferrer"
                  class="group/btn relative flex items-center justify-center gap-2 bg-gradient-to-r from-green-500 to-green-600 text-white px-6 py-4 rounded-xl font-semibold hover:shadow-xl hover:shadow-green-500/25 transition-all duration-300 hover:scale-105 overflow-hidden w-full"
                >
                  <span class="relative z-10 flex items-center gap-2">
                    <i class="fab fa-whatsapp text-xl"></i>
                    Pedir por WhatsApp
                  </span>
                  <div class="absolute inset-0 bg-gradient-to-r from-green-600 to-green-700 opacity-0 group-hover/btn:opacity-100 transition-opacity duration-300"></div>
                  <span class="absolute right-4 group-hover/btn:translate-x-1 transition-transform duration-300">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3"/>
                    </svg>
                  </span>
                </a>
                
                {/* Texto de env√≠o */}
                <p class="text-center text-xs text-secondary/60 mt-3">
                  üìç Env√≠o en Lima Metropolitana y Callao
                </p>
              </div>
            </div>
          </div>

          <!-- Indicador de hover (solo en desktop) -->
          <div class="absolute -top-3 -right-3 bg-primary text-white rounded-full p-2 shadow-lg opacity-0 group-hover:opacity-100 transition-opacity duration-300 hidden lg:block">
            <i class="fas fa-info text-sm"></i>
          </div>
        </div>
      ))}
    </div>

    <!-- CTA final -->
    <div class="text-center mt-16 lg:mt-20 animate-fade-in-up" style="animation-delay: 0.7s">
      <div class="inline-flex flex-col sm:flex-row items-center gap-4 p-6 lg:p-8 bg-white/80 backdrop-blur-sm rounded-3xl border border-primary/10 shadow-lg">
        <div class="text-left">
          <h4 class="font-serif text-xl lg:text-2xl text-primary mb-2">¬øNo encuentras lo que buscas?</h4>
          <p class="text-secondary/80 mb-4">Creamos arreglos personalizados seg√∫n tus necesidades.</p>
        </div>
        <a
          href={whatsappLink}
          target="_blank"
          rel="noopener noreferrer"
          class="group/cta relative bg-gradient-to-r from-green-500 to-green-600 text-white px-8 py-4 rounded-full font-semibold hover:shadow-xl hover:shadow-green-500/25 transition-all duration-300 hover:scale-105 whitespace-nowrap flex items-center gap-3"
        >
          <i class="fab fa-whatsapp text-xl"></i>
          <span class="relative z-10">Consultar por dise√±o personalizado</span>
          <div class="absolute inset-0 bg-gradient-to-r from-green-600 to-green-700 rounded-full opacity-0 group-hover/cta:opacity-100 transition-opacity duration-300"></div>
        </a>
      </div>
    </div>
  </div>
</section>

<style>
  /* Animaciones para la galer√≠a */
  @keyframes fadeInUp {
    from {
      opacity: 0;
      transform: translateY(30px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  /* Efecto 3D para flip cards */
  .perspective-1000 {
    perspective: 1000px;
  }

  .transform-style-3d {
    transform-style: preserve-3d;
  }

  .backface-hidden {
    backface-visibility: hidden;
  }

  .rotate-y-180 {
    transform: rotateY(180deg);
  }

  .rotate-y-0 {
    transform: rotateY(0);
  }

  /* Animaciones personalizadas */
  .animate-fade-in-up {
    animation: fadeInUp 0.8s ease-out forwards;
    opacity: 0;
  }

  .animate-pulse-slow {
    animation: pulseSlow 4s ease-in-out infinite;
  }

  .animate-float-slow {
    animation: floatSlow 8s ease-in-out infinite;
  }

  /* Clases para el estado activo */
  .card-active .card-front {
    transform: rotateY(180deg);
  }

  .card-active .card-back {
    transform: rotateY(0);
  }

  /* Clases reutilizadas */
  @keyframes pulseSlow {
    0%, 100% {
      opacity: 0.05;
    }
    50% {
      opacity: 0.1;
    }
  }

  @keyframes floatSlow {
    0%, 100% {
      transform: translateY(0) translateX(0);
    }
    33% {
      transform: translateY(-10px) translateX(10px);
    }
    66% {
      transform: translateY(5px) translateX(-5px);
    }
  }

  /* Mejoras de line clamp */
  .line-clamp-4 {
    overflow: hidden;
    display: -webkit-box;
    -webkit-box-orient: vertical;
    -webkit-line-clamp: 4;
  }

  .truncate {
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
  }

  /* Responsive adjustments */
  @media (max-width: 640px) {
    .perspective-1000 {
      perspective: 800px;
    }
  }

  /* Mejoras de scroll */
  @media (max-height: 700px) {
    .line-clamp-4 {
      -webkit-line-clamp: 3;
    }
  }
</style>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    // Seleccionar todas las tarjetas
    const cards = document.querySelectorAll('.card-container');
    
    // Funci√≥n para activar/desactivar el flip
    function toggleCard(card: { classList: { toggle: (arg0: string) => void; contains: (arg0: string) => any; }; querySelector: (arg0: string) => any; }) {
      card.classList.toggle('card-active');
      
      // Si est√° activo, asegurarnos de que las clases de transformaci√≥n est√©n correctas
      if (card.classList.contains('card-active')) {
        const front = card.querySelector('.card-front') as HTMLElement | null;
        const back = card.querySelector('.card-back') as HTMLElement | null;
        
        if (front) front.style.transform = 'rotateY(180deg)';
        if (back) back.style.transform = 'rotateY(0)';
      } else {
        const front = card.querySelector('.card-front') as HTMLElement | null;
        const back = card.querySelector('.card-back') as HTMLElement | null;
        
        if (front) front.style.transform = 'rotateY(0)';
        if (back) back.style.transform = 'rotateY(180deg)';
      }
    }
    
    // Funci√≥n para cerrar todas las tarjetas excepto la especificada
    function closeOtherCards(currentCard: Element) {
      cards.forEach(card => {
        if (card !== currentCard && card.classList.contains('card-active')) {
          card.classList.remove('card-active');
          const front = card.querySelector('.card-front') as HTMLElement | null;
          const back = card.querySelector('.card-back') as HTMLElement | null;
          
          if (front) front.style.transform = 'rotateY(0)';
          if (back) back.style.transform = 'rotateY(180deg)';
        }
      });
    }
    
    // Agregar event listeners a cada tarjeta
    cards.forEach(card => {
      // Click en la tarjeta (excepto en botones espec√≠ficos)
      card.addEventListener('click', function(this: Element, e: Event) {
        // No hacer nada si se hace clic en:
        // 1. El bot√≥n de cerrar
        // 2. El enlace de WhatsApp
        const target = e.target as HTMLElement;
        if (target && (target.closest('.close-btn') || target.closest('a[href*="whatsapp"]'))) {
          return;
        }
        
        // Si la tarjeta ya est√° activa y se hace clic fuera del contenido, cerrarla
        if (this.classList.contains('card-active') && !(e.target as Element).closest('.card-back')) {
          toggleCard(this);
        } else if (!this.classList.contains('card-active')) {
          // En m√≥vil, cerrar otras tarjetas antes de abrir una nueva
          if (window.innerWidth < 1024) {
            closeOtherCards(this);
          }
          toggleCard(this);
        }
      });
      
      // Bot√≥n de cerrar
      const closeBtn = card.querySelector('.close-btn') as HTMLElement | null;
      if (closeBtn) {
        closeBtn.addEventListener('click', function(e) {
          e.stopPropagation(); // Prevenir que el evento llegue a la tarjeta
          card.classList.remove('card-active');
          const front = card.querySelector('.card-front') as HTMLElement | null;
          const back = card.querySelector('.card-back') as HTMLElement | null;
          
          if (front) front.style.transform = 'rotateY(0)';
          if (back) back.style.transform = 'rotateY(180deg)';
        });
      }
    });
    
    // Cerrar tarjetas al hacer clic fuera
    document.addEventListener('click', function(e) {
      const target = e.target as HTMLElement | null;
      if (!target || !target.closest('.card-container')) {
        cards.forEach(card => {
          if (card.classList.contains('card-active')) {
            card.classList.remove('card-active');
            const front = card.querySelector('.card-front') as HTMLElement | null;
            const back = card.querySelector('.card-back') as HTMLElement | null;
            
            if (front) front.style.transform = 'rotateY(0)';
            if (back) back.style.transform = 'rotateY(180deg)';
          }
        });
      }
    });
    
    // Cerrar tarjetas con la tecla ESC
    document.addEventListener('keydown', function(e) {
      if (e.key === 'Escape') {
        cards.forEach(card => {
          if (card.classList.contains('card-active')) {
            card.classList.remove('card-active');
            const front = card.querySelector('.card-front') as HTMLElement | null;
            const back = card.querySelector('.card-back') as HTMLElement | null;
            
            if (front) front.style.transform = 'rotateY(0)';
            if (back) back.style.transform = 'rotateY(180deg)';
          }
        });
      }
    });
    
    // Ajustar para pantallas peque√±as
    function handleResponsive() {
      if (window.innerWidth < 1024) {
        // En m√≥vil/tablet, solo una tarjeta activa a la vez
        cards.forEach(card => {
          card.style.cursor = 'pointer';
        });
      } else {
        // En desktop, m√∫ltiples tarjetas pueden estar activas
        cards.forEach(card => {
          card.style.cursor = 'pointer';
        });
      }
    }
    
    // Inicializar
    handleResponsive();
    window.addEventListener('resize', handleResponsive);
  });
</script>